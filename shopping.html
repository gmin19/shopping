<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì˜¤í‚¤ë‚˜ì™€ ì•„ë©”ë¦¬ì¹¸ ë¹Œë¦¬ì§€ - ì‡¼í•‘/ì•¡í‹°ë¹„í‹°</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* [Design System - Mobile Optimized] */
        :root {
            --primary: #00A896;   /* ë©”ì¸: ì˜¤í‚¤ë‚˜ì™€ ì—ë©”ë„ë“œ */
            --accent: #FF6F61;    /* ê°•ì¡°: ì„ ì…‹ ì˜¤ë Œì§€ */
            --bg: #F8F9FA;        /* ì•± ë‚´ë¶€ ë°°ê²½ */
            --outer-bg: #e9ecef;  /* PC í™”ë©´ ë°”ê¹¥ ë°°ê²½ */
            --text: #333;
            --white: #ffffff;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
            --max-width: 600px;   /* ëª¨ë°”ì¼ ë·° ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        /* PC ë°°ê²½ ì„¤ì • */
        html { background-color: var(--outer-bg); }

        body { 
            margin: 0 auto; /* ì¤‘ì•™ ì •ë ¬ */
            padding: 0; 
            font-family: 'Noto Sans KR', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            padding-bottom: 80px; 
            min-height: 100vh;
            
            /* ëª¨ë°”ì¼ ë ˆì´ì•„ì›ƒ ê³ ì • (PC ëŒ€ì‘) */
            max-width: var(--max-width);
            box-shadow: 0 0 20px rgba(0,0,0,0.1); /* ì•± ê°™ì€ ê·¸ë¦¼ì íš¨ê³¼ */
            position: relative;
        }

        a { text-decoration: none; color: inherit; }

        /* ----------------------------------------------------------- */
        /* 1. ê³ ì • í—¤ë” ì˜ì—­ (ì§€ë„ í¬í•¨)                                 */
        /* ----------------------------------------------------------- */
        header {
            position: fixed; top: 0; left: 50%; transform: translateX(-50%); /* ì¤‘ì•™ ì •ë ¬ */
            width: 100%; max-width: var(--max-width); /* ë„ˆë¹„ ì œí•œ */
            z-index: 1000;
            background: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        /* íƒ­ ë§í¬ */
        .main-tabs { display: flex; border-bottom: 1px solid #eee; }
        .tab-link {
            flex: 1; padding: 12px 0; text-align: center;
            font-size: 15px; font-weight: 700; color: #999; 
            cursor: pointer; transition: 0.2s; background: #fff;
        }
        /* ì‡¼í•‘ íƒ­ í™œì„±í™” ìŠ¤íƒ€ì¼ */
        .tab-link.active { color: var(--primary); border-bottom: 3px solid var(--primary); }

        /* ì§€ë„ í† ê¸€ ë²„íŠ¼ */
        .map-toggle-bar {
            background: #E0F2F1; color: #00695C; text-align: center; padding: 8px;
            font-size: 13px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px;
        }

        /* ğŸ—ºï¸ ì¸í„°ë™í‹°ë¸Œ ì§€ë„ ì˜ì—­ */
        #mapSection {
            height: 0; overflow: hidden; background: #ccedee; position: relative;
            transition: height 0.4s ease-in-out;
        }
        #mapSection.open { height: 250px; } /* ì§€ë„ í¼ì³¤ì„ ë•Œ ë†’ì´ */
        
        /* ì§€ë„ ì´ë¯¸ì§€ ì—°ê²° (ì‡¼í•‘ìš©) */
        .map-placeholder {
            width: 100%; height: 100%; position: relative;
            /* ğŸ‘‡ ì—…ë¡œë“œ ì˜ˆì •ì¸ ì‡¼í•‘ìš© ì§€ë„ íŒŒì¼ëª… */
            background: url('./map_shopping.png') center/cover no-repeat;
        }

        /* í•«ìŠ¤íŒŸ (í´ë¦­ ì˜ì—­) ìŠ¤íƒ€ì¼ */
        .hotspot {
            position: absolute; background: rgba(255,255,255,0.9); padding: 4px 8px; border-radius: 12px;
            font-size: 11px; font-weight: bold; color: var(--text); box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transform: translate(-50%, -50%); cursor: pointer; border: 2px solid var(--primary);
            animation: pulse 2s infinite;
        }
        /* ìœ„ì¹˜ ì˜ˆì‹œ (ì§€ë„ ì´ë¯¸ì§€ì— ë§ì¶° top/left ì¡°ì ˆ ê¶Œì¥) */
        .spot-1 { top: 30%; left: 30%; } /* ë°í¬ A */
        .spot-2 { top: 40%; left: 60%; } /* ë°í¬ B */
        .spot-3 { top: 70%; left: 40%; } /* ì‹œì‚¬ì´ë“œ */
        .spot-4 { top: 20%; left: 80%; } /* ë ˆì¿  */

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 0 0 rgba(0, 168, 150, 0.7); }
            70% { transform: translate(-50%, -50%) scale(1.05); box-shadow: 0 0 0 10px rgba(0, 168, 150, 0); }
            100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 0 0 rgba(0, 168, 150, 0); }
        }

        /* ----------------------------------------------------------- */
        /* 2. ê²€ìƒ‰ & í•„í„° ì˜ì—­                                           */
        /* ----------------------------------------------------------- */
        .search-area { padding: 10px 15px 5px 15px; display: flex; align-items: center; gap: 10px; background: #fff; }
        
        .search-box { position: relative; flex: 1; }
        .search-box input {
            width: 100%; padding: 10px 10px 10px 35px; border-radius: 20px;
            border: 1px solid #eee; background: #f5f5f5; font-size: 14px; outline: none;
        }
        .search-icon { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #aaa; }

        /* ì°œí•œ ê°€ê²Œ í† ê¸€ */
        .fav-toggle-btn {
            border: none; background: none; font-size: 24px; color: #ccc; cursor: pointer; padding: 0;
            transition: color 0.2s, transform 0.2s;
        }
        .fav-toggle-btn.active { color: var(--accent); transform: scale(1.1); }
        .fav-label { font-size: 10px; color: #888; display: block; text-align: center; line-height: 1; margin-top: -2px;}

        /* í•´ì‹œíƒœê·¸ ë°” (ê°€ë¡œ ìŠ¤í¬ë¡¤) */
        .hashtag-nav {
            display: flex; gap: 6px; padding: 8px 15px 12px 15px; overflow-x: auto; background: #fff;
            scrollbar-width: none; border-bottom: 1px solid #eee;
        }
        .hashtag-nav::-webkit-scrollbar { display: none; }
        .tag-chip {
            padding: 6px 12px; border-radius: 15px; background: #fff; border: 1px solid #ddd;
            font-size: 13px; color: #555; white-space: nowrap; cursor: pointer; transition: 0.2s;
        }
        .tag-chip.active { background: var(--text); color: #fff; border-color: var(--text); }
        .tag-chip:hover { border-color: var(--primary); color: var(--primary); }

        /* ----------------------------------------------------------- */
        /* 3. ì½˜í…ì¸  ì˜ì—­                                                */
        /* ----------------------------------------------------------- */
        .content-container { 
            margin-top: 180px; 
            padding: 15px; 
            min-height: 80vh;
        }

        /* ì„¹ì…˜ & ì¹´ë“œ */
        .building-section { scroll-margin-top: 190px; margin-bottom: 40px; }
        .section-header {
            display: flex; align-items: center; margin-bottom: 15px; position: sticky; top: 175px;
            font-size: 18px; font-weight: 700; color: #222; background: var(--bg); padding: 5px 0; z-index: 900;
        }
        .section-header span { color: var(--primary); margin-right: 5px; }

        .card {
            background: #fff; border-radius: 16px; padding: 20px; margin-bottom: 15px;
            box-shadow: var(--shadow); position: relative; border: 1px solid transparent;
            transition: transform 0.2s;
        }
        .card:active { transform: scale(0.98); }

        /* ì¹´ë“œ ë‚´ë¶€ */
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 5px; }
        .store-name { font-size: 17px; font-weight: bold; color: #222; margin: 0; line-height: 1.3; }
        .card-like-btn {
            font-size: 20px; color: #ddd; cursor: pointer; background: none; border: none; padding: 5px;
            position: absolute; right: 15px; top: 15px; z-index: 5;
        }
        .card-like-btn.active { color: var(--accent); }

        .store-badges { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; }
        .badge { font-size: 11px; padding: 3px 6px; border-radius: 4px; background: #f0f0f0; color: #666; }
        .badge.discount { background: #FFF0EE; color: var(--accent); font-weight: bold; }

        .card-info { font-size: 13px; color: #666; display: flex; flex-direction: column; gap: 4px; }
        
        /* ìƒì„¸ì •ë³´ (ì•„ì½”ë””ì–¸) */
        .more-info {
            max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;
            background: #fcfcfc; border-radius: 8px; margin-top: 10px;
        }
        .more-info.open { max-height: 500px; padding: 15px; border: 1px dashed #eee; }
        
        .action-row { display: flex; gap: 8px; margin-top: 15px; }
        .act-btn {
            flex: 1; padding: 10px; border-radius: 8px; text-align: center; font-size: 13px; font-weight: 500; cursor: pointer;
        }
        .btn-map { background: #E0F2F1; color: #00695C; }
        .btn-detail { background: #fff; border: 1px solid #ddd; color: #555; }

        /* Top ë²„íŠ¼ (PC ìœ„ì¹˜ ë³´ì • í¬í•¨) */
        .top-btn {
            position: fixed; bottom: 25px; right: 20px;
            width: 50px; height: 50px; border-radius: 50%;
            background: var(--primary); color: #fff; border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            font-size: 22px; cursor: pointer; opacity: 0; pointer-events: none; transition: 0.3s; z-index: 2000;
        }
        @media (min-width: 601px) {
            .top-btn { right: calc(50% - 280px); }
        }
        .top-btn.show { opacity: 1; pointer-events: auto; }

    </style>
</head>
<body>

    <header id="mainHeader">
        <div class="main-tabs">
            <a href="index.html" class="tab-link">ğŸ½ï¸ ë§›ì§‘ Â· ì¹´í˜</a>
            <a href="shopping.html" class="tab-link active">ğŸ›ï¸ ì‡¼í•‘ Â· ê¸°íƒ€</a>
        </div>

        <div class="map-toggle-bar" onclick="toggleMap()">
            <span>ğŸ—ºï¸ ì§€ë„ì—ì„œ ì‡¼í•‘ëª° ì°¾ê¸°</span>
            <span id="mapArrow">â–¼</span>
        </div>

        <div id="mapSection">
            <div class="map-placeholder">
                <div class="hotspot spot-1" onclick="common.scrollToSection('section-ë°í¬ì•„ì¼ëœë“œAë™')">ë°í¬ A</div>
                <div class="hotspot spot-2" onclick="common.scrollToSection('section-ë°í¬ì•„ì¼ëœë“œBë™')">ë°í¬ B</div>
                <div class="hotspot spot-3" onclick="common.scrollToSection('section-ë°í¬ì•„ì¼ëœë“œì‹œì‚¬ì´ë“œ')">ì‹œì‚¬ì´ë“œ</div>
                <div class="hotspot spot-4" onclick="common.scrollToSection('section-ë ˆì¿ í”„ë¦¬ë¯¸ì–´ë™')">ë ˆì¿  í˜¸í…”</div>
                <div style="position: absolute; bottom: 10px; right: 10px; font-size: 10px; color: #555; background: rgba(255,255,255,0.8); padding: 2px 5px;">* ê±´ë¬¼ì„ í„°ì¹˜í•˜ë©´ ì´ë™í•©ë‹ˆë‹¤</div>
            </div>
        </div>

        <div class="search-area">
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="ìƒì ëª…, ê¸°ë…í’ˆ, í‹°ì…”ì¸  ê²€ìƒ‰...">
            </div>
            <div style="text-align: center;">
                <button class="fav-toggle-btn" id="favFilterBtn" onclick="common.toggleFavFilter(this)">
                    â™¥
                </button>
                <span class="fav-label">ì°œë§Œ ë³´ê¸°</span>
            </div>
        </div>

        <nav class="hashtag-nav" id="hashtagNav"></nav>
    </header>

    <main class="content-container">
        <div id="list-container"></div>
    </main>

    <button class="top-btn" onclick="window.scrollTo({top:0, behavior:'smooth'})">â†‘</button>

    <script src="common.js"></script>
    <script>
        // ì§€ë„ í† ê¸€ í•¨ìˆ˜
        function toggleMap() {
            const mapSec = document.getElementById('mapSection');
            const arrow = document.getElementById('mapArrow');
            mapSec.classList.toggle('open');
            
            if(mapSec.classList.contains('open')) {
                arrow.innerText = 'â–²';
            } else {
                arrow.innerText = 'â–¼';
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            if(common && common.initPage) {
                // ì‡¼í•‘ ë°ì´í„° ë¡œë“œ (shopping íƒ€ì…)
                common.initPage('shopping');
            }

            // Top ë²„íŠ¼ í‘œì‹œ ë¡œì§
            window.addEventListener('scroll', () => {
                const btn = document.querySelector('.top-btn');
                if (window.scrollY > 300) btn.classList.add('show');
                else btn.classList.remove('show');
            });
        });
    </script>
</body>
</html>
